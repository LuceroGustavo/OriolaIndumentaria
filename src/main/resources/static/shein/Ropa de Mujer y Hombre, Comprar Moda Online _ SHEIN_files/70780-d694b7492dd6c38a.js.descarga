"use strict";(self.webpackChunkSHEIN_W=self.webpackChunkSHEIN_W||[]).push([[70780],{101877:(e,t,o)=>{o.d(t,{AI:()=>m,C7:()=>p,EG:()=>T,Fm:()=>f,G1:()=>b,Kq:()=>_,QW:()=>I,bI:()=>g,eB:()=>u,qE:()=>w,uC:()=>C,uM:()=>k,xs:()=>v,z4:()=>y,zX:()=>h});var n=o(544764),i=o.n(n),a=o(387588),r=o.n(a),l=o(806365),s=o(579308),c=o(383112),d=o(665640);function p(e={},t="",o=!1,n=!0){if(Object.keys(e).length>0){const i=o?"RPc":"SPc";let a=i+t;/^(Sh|Rw)/.test(a)&&(a=o?a.replace(/(Rw)(\w*)(pc)/,"$2"):a.replace(/(Sh)(\w*)(Pc)/,"$2"));let r=e[a]&&e[a].p;if(r||(r=e[`${i}ActDefault`]&&e[`${i}ActDefault`].p),r&&"string"==typeof r)return n?(0,l.J)(r):r}return""}const m=e=>e?9===e.length?e[0].concat(e.slice(3,9),e.slice(1,3)):e:"",u=()=>{const e=(new Date).getTimezoneOffset()/60;return`GMT${e>0?"-":"+"}${Math.abs(e)}`},h=(e,t)=>{var o;if(!/^#([A-Fa-f0-9]{3,4}){1,2}$/.test(e))throw new Error("Invalid HEX");const n=Math.floor((e.length-1)/3),i=null===(o=e.slice(1))||void 0===o?void 0:o.match(new RegExp(`.{${n}}`,"g")),[a,r,l,s]=i.map((e=>parseInt(e.repeat(2/e.length),16)));return`rgba(${a}, ${r}, ${l}, ${((e,t)=>void 0!==e?e/255:"number"!=typeof t||t<0||t>1?1:t)(s,t)})`},v=e=>{const{__comp_name:t,styleType:o,componentKey:n,props:{items:i=[],name:a=""}}=e||{},r=(e={})=>({attrs:{"data-component-name":a},style:e}),l={HorizontalCoupon:"122px",HorizontalAnchor:"72px",DrawSpin:"274px"},s={HorizontalItems:"27%",RankingEntrance:"53%",Video:"60%"};if(["UP_COUNTDOWN","LEFT_COUNTDOWN"].includes(o)&&Object.assign(l,{Countdown:"UP_COUNTDOWN"===o?"168px":"68px"}),l[t])return r({"min-height":l[t]});if(s[t])return r({paddingBottom:s[t]});if(["IMAGE_CAROUSEL_COMPONENT","IMAGE_COMPONENT","ANCHOR_COMPONENT","COUNTDOWN_COMPONENT"].includes(n)){var c,d,p,m,u;const{height:e,width:t}=(null==i||null===(c=i[0])||void 0===c?void 0:c.image)||(null==i||null===(d=i[0])||void 0===d||null===(p=d.items)||void 0===p||null===(m=p[0])||void 0===m?void 0:m.image)||(null==i||null===(u=i[0])||void 0===u?void 0:u.imgSrc)||{};return r({paddingBottom:(e/t*100).toFixed(2)+"%"})}if("FLASH_SALE"===n){const{metaData:t={}}=(null==e?void 0:e.props)||{},{topBannerImage:o={},isShowBanner:n}=t;return r({paddingBottom:27+Number(n&&o.ratio?""+1/o.ratio*100:"")+"%"})}if("DAILYNEW_ITEMS"===o){var h;const{rows:t,countPerRow:o,isShowViewAll:n=!1}=(null==e||null===(h=e.props)||void 0===h?void 0:h.metaData)||{};return r({paddingBottom:`calc(${100/o*1.3415*t}% + ${108+(n?72:0)+56*t}px)`})}if("LEFT_PICTURE_ITEMS"===o){var v;const{title:t,lineNum:o=1}=(null==e||null===(v=e.props)||void 0===v?void 0:v.metaData)||{};return r({paddingBottom:`calc(${1==o?"26.6":"47.4"}% + ${t?"76.8":0}px)`})}if("SURVEY_COMPONENT"===n){var f;const{isAllowMultiCommit:t=!1}=(null==e||null===(f=e.props)||void 0===f?void 0:f.metaData)||{};if((null==e?void 0:e.survey)||!1)return r({"min-height":(t?309:235)+"px"});{const e={1:126,2:143.19,3:86,4:86,5:86,6:86,7:135.19};return r({"min-height":182+(i||[]).reduce(((t,o)=>{const n=null==e?void 0:e[String(null==o?void 0:o.quesType)];let i=0;return 3===(null==o?void 0:o.quesType)||4===(null==o?void 0:o.quesType)?i=56*Math.ceil((((null==o?void 0:o.quesOption)||[]).length||0)/3):5!==(null==o?void 0:o.quesType)&&6!==(null==o?void 0:o.quesType)||(i=360.66*Math.ceil((((null==o?void 0:o.quesOption)||[]).length||0)/4)),n+i+t}),0)+"px"})}}if("PK_COMPONENT"===n){var g,y,_,$,I;const t=(null==e||null===(g=e.props)||void 0===g?void 0:g.items)||[],o=Math.min(null===(y=t[0])||void 0===y||null===(_=y.image)||void 0===_?void 0:_.ratio,null===($=t[1])||void 0===$||null===(I=$.image)||void 0===I?void 0:I.ratio);return r({paddingBottom:8+Number(1/o*100||0)+"%"})}if("SHEIN_X_VOTE"===n){var w;const{layoutType:t="tile"}=(null==e||null===(w=e.props)||void 0===w?void 0:w.metaData)||{};return r({"min-height":48+98+("tile"===t?1825:1005)+"px"})}if("NEWS_SECTION"===o){const{items:t,metaData:o}=(null==e?void 0:e.props)||{},n=null!=o&&o.disableBottomSpacing?0:16,i=Math.ceil(t.length/2);return r({"min-height":170*i+10*(i-1)+n+"px"})}return r({})};async function f(){try{const e=await(0,c.A)({url:"/api/ccc/serverTime/get"});return(null==e?void 0:e.time)||null}catch(e){return null}}const g=e=>{const t=new Date(e),o=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds());return new Date(o+288e5).getDay()},y=e=>{if(!e)return{top:0,left:0};try{const t=e.getBoundingClientRect(),o=document.body,n=document.documentElement,i=window.pageYOffset||n.scrollTop||o.scrollTop,a=window.pageXOffset||n.scrollLeft||o.scrollLeft,r=n.clientTop||o.clientTop||0,l=n.clientLeft||o.clientLeft||0,s=t.top+i-r,c=t.left+a-l;return{top:Math.round(s),left:Math.round(c)}}catch(e){return d.error(e),{top:0,left:0}}},_=()=>{try{const e=document.documentElement||document.body,t=e.scrollTop;e.scrollTo({top:t-1}),e.scrollTo({top:t})}catch(e){return d.error(e),{top:0,left:0}}},$=function(){return`${(new Date).getTime()}${Math.floor(1e3*Math.random())}`},I={event:{},once(e,t){"function"==typeof t&&(this.event[e]=[{key:$(),fn:t}])},off(e,t){t?this.event[e].splice(this.event[e].findIndex((e=>e.key===t)),1):delete this.event[e]},on(e,t,o){"function"==typeof t&&(this.event[e]?o?this.event[e].push({key:o,fn:t}):this.event[e].push({key:$(),fn:t}):this.event[e]=o?[{key:o,fn:t}]:[{key:$(),fn:t}])},emit(e,...t){var o,n;null===(o=this.event)||void 0===o||null===(n=o[e])||void 0===n||n.forEach((({fn:e})=>e(...t)))}};function w({sceneData:e,propData:t,index:o}){if("undefined"==typeof window)return{};const n=(0,s.e)({key:"componentId"}),i=(0,s.e)({key:"componentAdp"}),a={scene:null==e?void 0:e.pageFrom,componentId:null==t?void 0:t.componentId,styleType:null==t?void 0:t.styleType,channelName:null==e?void 0:e.tabName,blockKey:t.blockKey};return"campaign"===(null==e?void 0:e.pageFrom)&&+n===(null==t?void 0:t.componentId)&&i&&0===o&&(a.adp=i),a}["campaign","storeHomePage","RealClassEmptyRecommend","SelectClassEmptyRecommend","OtherListEmptyRecommend","OtherListFilteredRecommend","ConfirmDeliveryRecommend","CancelPartialOrderRecommend","UnpaidorderCancelRecommend","RepurchaseRecommend","collectionBoardsRecommend","collectionBoardsEmptyRecommend","orderListRecommend","couponRecommend","orderCommentRecommend","returnSuccessfulRecommend","refundDetailRecommend"].reduce(((e,t)=>(e[t]="recommend_page",e)),{});const k=(e,t="_self")=>{e&&("_blank"!==t?window.location.href=e:window.open(e,t))};function T(e,t){const o={isAdpComp:!1,adp:0};if(!e)return o;try{const n=new(i())(null==e?void 0:e.split("?")[1]),a=n.get("componentId"),r=n.get("componentAdp");o.isAdpComp=a&&a==t;const l=r||"0";o.adp=null==l?void 0:l.split(",")[0]}catch(e){d.log(e)}return o}const C=({name:e,startTime:t})=>{try{var o;const n={data:[{key_path:e,values:{num:Date.now()-t}}]};null===(o=window.TPM)||void 0===o||o.run({marketing:"ClientAnalytics",method:"_defineTrack",params:{data:n,options:{random:1,immediate:!0}}})}catch(e){d.error(e)}},D=e=>{if(!e||"string"!=typeof e)return null;if((e=e.trim()).startsWith("http://")||e.startsWith("https://"))return e;if(e.startsWith("/")){return("undefined"!=typeof window?window.location.origin:"https://shein.com")+e}return`https://${e}`},b=(e,t,o)=>{if(!e||!t||"string"!=typeof e||"string"!=typeof t)return void d.warn("getDiffParams: 传入的URL参数无效",{ccc:e,bff:t,compInfo:o});const n=D(e),i=D(t);if(!n||!i)return void d.warn("getDiffParams: URL规范化失败",{ccc:e,bff:t,compInfo:o});let a,l;try{a=new(r())(n).searchParams}catch(t){return void d.error("getDiffParams: CCC URL构造失败",{originalUrl:e,normalizedUrl:n,error:t.message})}try{l=new(r())(i).searchParams}catch(e){return void d.error("getDiffParams: BFF URL构造失败",{originalUrl:t,normalizedUrl:i,error:e.message})}const s=[],c=[];a.forEach(((e,t)=>{"entranceType"===t&&"IMMERSIVE_BANNER"!==o&&"CATEGORY_RECOMMEND_PLACEHOLDER"!==o||l.get(t)!==e&&c.push({ccc:`${t}=${e}`,bff:`${t}=${l.get(t)}`})})),l.forEach(((e,t)=>{"entranceType"===t&&"IMMERSIVE_BANNER"!==o&&"CATEGORY_RECOMMEND_PLACEHOLDER"!==o||a.get(t)!==e&&s.push({ccc:`${t}=${a.get(t)}`,bff:`${t}=${e}`})})),s.length>0||c.length>0?(d.log("\n%c链接参数对比结果: %c有差异","font-weight: bold;","color: red; font-weight: bold;"),d.log("\n%c当前组件名称","font-weight: bold;",o),c.length>0&&(d.log("\n%cCCC链接中的参数，在BFF链接中缺失或值不一致 (共 "+c.length+" 个):\n%c参数列表 (来自CCC):"+c.map((e=>`ccc: ${e.ccc} -> bff: ${e.bff}`)).join(", "),"\n%c不同的参数:"+c.keys(),"color: orange;"),d.log("缺少的参数对比",c),d.log("参数详情",{ccc:decodeURIComponent(a.toString()),bff:decodeURIComponent(l.toString())})),s.length>0&&(d.log("\n%cBFF链接中的参数，在CCC链接中不存在或值不一致 (BFF额外或不同值，共 "+s.length+" 个):\n%c参数列表 (来自BFF): "+s.map((e=>`ccc: ${e.ccc} -> bff: ${e.bff}`)).join(", "),"\n%c不同的参数:"+s.keys(),"color:rgb(151, 108, 108);"),d.log("多的参数对比",s),d.log("参数详情",{ccc:decodeURIComponent(a.toString()),bff:decodeURIComponent(l.toString())}))):(d.log("\n%c当前组件名称","font-weight: bold;",o),d.log("\n%c链接参数对比结果: %c无差异","font-weight: bold;","color: green; font-weight: bold;"),d.log({ccc:decodeURIComponent(a.toString()),bff:decodeURIComponent(l.toString())}))}},277854:(e,t,o)=>{o.d(t,{W8:()=>l,k$:()=>s,qA:()=>c});var n=o(899909),i=o.n(n),a=o(92525),r=o(941368);const l=({item:e,compIndex:t,index:o,propData:n})=>{var i;const a={oprt_loc:e.hasOwnProperty("oprt_loc")?e.oprt_loc:t+1,item_loc:e.hasOwnProperty("item_loc")?e.item_loc:o+1},r=(null==e?void 0:e.markMap)||(null==n||null===(i=n.props)||void 0===i?void 0:i.markMap)||{};return{srcIdentifier:[...(null==r?void 0:r.src_identifier)||[],`ps=${a.oprt_loc}_${a.item_loc}`],ps:a}},s=({sceneName:e,componentName:t,operationComponentName:o,comIndex:n=1,positionIndex:i=1,item:a={},hotZoneParams:r={},pageFrom:s="",activityId:c="",activityNameEn:d="",extra:p={},isBff:m=!1,propData:u})=>{const{hrefType:h="noJump",hrefTarget:v=""}=a||{},f="webLink"===h&&1==a.isInternalLink&&v?`${h}_${location.protocol}//${location.hostname}${v}`:`${h}_${v||0}`,g=null!=a&&a.hasOwnProperty("item_loc")?a.item_loc:i;let{hot_area:y=""}=r,_=[`on=${t}`,`cn=${o}`,`hz=${y||0}`,`ps=${n}_${g}`,`jc=${decodeURIComponent(f)}`];if("home"===s&&m){let e=null!=a&&a.hasOwnProperty("item_loc")?a.item_loc:"";""===e&&(e=i-1);const{srcIdentifier:t}=l({item:a,compIndex:n-1,index:e,propData:u});_=t}"campaign"==s&&_.push(`ai=${c}`,`an=${d}`);let $=_.join("`");p.extraSrcIdentifier&&($+="`"+p.extraSrcIdentifier);const I="undefined"==typeof window?"":(null===(w=window.getSaPageInfo)||void 0===w?void 0:w.tab_page_id)||(window.SaPageInfo?SaPageInfo.page_name+SaPageInfo.start_time:"");var w;return{src_module:e,src_identifier:$,src_tab_page_id:I,url_params:[`src_module=${e}`,`src_identifier=${encodeURIComponent($)}`,`src_tab_page_id=${I}`].join("&")}},c=({propData:e={},sceneName:t=0,poskey:o="",position:n=null})=>{const{componentKey:l=0,id:s=0,styleType:c=0}=e||{},d=a.default.get({key:"memberId",actionType:"ccc_analysis"})?5e4:50001;let p="";if(o){var m,u;const e=r.T.getUserAbtResultForAnalysis({posKeys:o});p=(null==e?void 0:e.ga)||"",p=null===(m=p)||void 0===m||null===(u=i()(m))||void 0===u?void 0:u.call(m,"-",",")}const h=[`CCCSN=${t}`,`ON=${l}`,`OI=${s}`,`CN=${c}`,`TI=${d}`,"aod=0"];return{name:h.concat([n||"PS={-}",`ABT=${p||0}`]).join("_"),ici:h.join("_")}}},470780:(e,t,o)=>{o.d(t,{O:()=>v});var n=o(387588),i=o.n(n),a=o(950648),r=o(277854),l=o(271141),s=o(101877),c=o(665640);const{langPath:d="",SW_FETCH_HTML_CONFIG:p={},NODE_SERVER_ENV:m}="undefined"!=typeof gbCommonInfo?gbCommonInfo:{},u={ONE_THIRD_IMAGE:"ONE_THIRD_IMAGE",ONE_THIRD_IMAGE_CAROUSEL:"ONE_THIRD_IMAGE_CAROUSEL",ONE_THIRD_ITEM:"ONE_THIRD_ITEM"},h={h1:"h1",sbc:"shopbycate"};class v{constructor({sceneData:e,propData:t,context:o}){this.sceneData=e,this.propData=t,this.context=o}getLink({item:e={},cateLinks:t={}}){var o,n;let i="javascript:;";const r=e.hrefType,s=e.hrefTarget;switch(r){case"noJump":i="javascript:;";break;case"webLink":i=1==e.isInternalLink?`${d}${s}`:s;break;case"skuList":case"sku":case"real":case"frontCat":case"itemPicking":{let o=t[`${"skuList"===r?"sku":r}_${s}`]||"";o.url&&(o=o.url);const n=o||e.relativeUrl;n&&(i=`${d}${n}`)}break;case"activityNew":i=`${d}/campaigns/${s}`;try{var p,m,u;const e=null===(u=((null===(p=this.context)||void 0===p||null===(m=p.content)||void 0===m?void 0:m.pathIdentityMapInfo)||[]).filter((e=>e.identity===s))[0])||void 0===u?void 0:u.tinyUrl;e&&(i=`${d}/${e}`)}catch(e){c.error(e)}break;case"activityOld":i=`${d}/campaign/${s}`;break;case"flashSale":case"lightningDeal":i=`${d}/flash-sale.html`;break;case"sheinPicks":try{var h,v;const e=(null===(h=this.context)||void 0===h||null===(v=h.PICKS_GLOBAL_INFO)||void 0===v?void 0:v.LINKS)||{};i=(0,a.u)(`${d}/shein-picks.html?hrefTarget=${s}`,e)}catch(e){c.log(e)}break;case"dailyNew":i=`${d}/daily-new.html`;break;case"survey":i=`${d}/survey/${s}`;break;case"trial":{const o=t[r]||e.webClickUrl;o&&(i=`${d}${o}`)}break;case"lookBook":i=`${d}/shop-multiple-sets-${s}.html`;break;case"article":if(e.relativeUrl)i=`${d}/${e.relativeUrl}.html`;else{const t=e.selectTypeName||"article";i=`${d}/${t}-a-${s}.html`}break;case"game":i=e.gameType?`${d}/game/${e.gameType}/${s}`:"javascript:;";break;case"thirdPartyStoreList":case"thirdPartyStoreHome":{var f;let o=t[`store_${s}`]||e.webClickUrl;var g,y;if(o&&(i=`${d}${o}`),"campaign"===(null===(f=this.sceneData)||void 0===f?void 0:f.pageFrom))i=`${i}${i.indexOf("?")>-1?"&":"?"}main_cate_id=${null!==(g=e.cat_id)&&void 0!==g?g:""}&main_goods_id=${null!==(y=e.goods_id)&&void 0!==y?y:""}&rule_poskey=SPShopItemList`}break;case"storeItem":i=`${d}/store/home?store_code=${s}&tab=items&page_from=${(null===(o=this.sceneData)||void 0===o?void 0:o.pageFrom)||"page_category"}`;break;case"sheinxDesignerRecruit":i=`${d}/sheinx`;break;case"sheinxDesignerInformation":i=`${d}/designer/${s}`;break;case"promoDiscount":try{var _,$;const e=(null===(_=this.context)||void 0===_||null===($=_.PICKS_GLOBAL_INFO)||void 0===$?void 0:$.LINKS)||{};i=(0,a.u)(`${d}/promo-discount.html?hrefTarget=${s}`,e)}catch(e){c.log(e)}break;case"giftCard":i="/giftcard.html";break;case"prime":i="/user/prime";break;case"underPrice":i=`${d}/under-prices-products.html?tab=${s}`;break;case"sheinxDesignerList":i=`${d}/designer_list`;break;case"loveromwe":i="/looks-we-love-1.html";break;case"couponCenter":i="/user/coupon";break;case"pointsCenter":i="/user/points";break;case"userInfoEdit":i="/user/account_setting";break;case"thriftyFind":i="/super-deals";break;case"trendsChannel":i="/top-trend";break;case"swift":{const t=e.relativeUrl||"";i=t?`${d}${t}`:`/ark/${s}`}break;default:var I,w,k,T,C;if("homePage"==(null===(n=this.sceneData)||void 0===n?void 0:n.pageType))l.A.slsCompFilter({logLevel:2,tag:"client_home_warn_total",message:"HomeRouterWarn",reason:"clickUrlEmpty",module:(null===(I=this.propData)||void 0===I?void 0:I.styleType)||"",tabName:(null===(w=this.sceneData)||void 0===w?void 0:w.tabName)||"",pageName:(null===(k=this.sceneData)||void 0===k?void 0:k.pageType)||"",cccId:(null===(T=this.propData)||void 0===T?void 0:T.componentId)||(null===(C=this.propData)||void 0===C?void 0:C.id)||"",position:0},!1)}return i||"javascript:;"}getFullLink({item:e={},cateLinks:t={},compIndex:o,index:n,hotZoneParams:i={},isBff:a}){var r;let l=a&&null!=e&&e.webClickUrl?null==e?void 0:e.webClickUrl:this.getLink({item:e,cateLinks:t});return"webLink"===(null==e?void 0:e.hrefType)&&0==(null==e?void 0:e.isInternalLink)?l:"undefined"==typeof window?this.serverGetLink({item:e,url:l}):l.indexOf("javascript:;")>-1?l:("storeHomePage"===(null===(r=this.sceneData)||void 0===r?void 0:r.pageFrom)&&a&&"real"===e.hrefType&&e.hrefTarget&&!e.child_cat_id&&(e.child_cat_id=e.hrefTarget),this.setLinkParams({item:e,url:l,compIndex:o,index:n,hotZoneParams:i,isBff:a}))}getBffFullLink({item:e={},cateLinks:t={},compIndex:o,index:n,hotZoneParams:a={},isBff:l}){var d,u,h,v,f,g,y,_,$,I,w,k,T;if(null===(d=this.sceneData)||void 0===d||!d.webClickUrlParamSwitch)return"undefined"!=typeof window&&"1"===(null===(T=window.localStorage)||void 0===T?void 0:T.getItem("ccc_link_test"))&&c.log("%c 走ccc 链接","color: green; font-size: 16px; font-weight: bold;"),this.getFullLink({item:e,cateLinks:t,compIndex:o,index:n,hotZoneParams:a,isBff:l});if(!e.webClickUrl)return this.getFullLink({item:e,cateLinks:t,compIndex:o,index:n,hotZoneParams:a,isBff:l});let C=e.webClickUrl?e.webClickUrl:this.getLink({item:e,cateLinks:t});if("webLink"===(null==e?void 0:e.hrefType)&&0==(null==e?void 0:e.isInternalLink))return C;if("undefined"==typeof window)return this.serverGetLink({item:e,url:C});if(C.indexOf("javascript:;")>-1)return C;const D=[],b={dailyParam:["dailyNew","itemPicking"],activityParam:["activityOld","activityNew","swift"],categoryParam:["dailyNew","flashSale","lightningDeal"]};e.mallCodes&&D.push(`mallCode=${e.mallCodes}`),e.adp&&D.push(`adp=${e.adp}`);let N="home"===(null===(u=this.sceneData)||void 0===u?void 0:u.pageFrom)?"home":"";if(N&&D.push(`fromPageType=${N}`),b.activityParam.includes(e.hrefType)){const t=this.activityUrlAddQuery(e);t&&D.push(t)}if(b.dailyParam.includes(e.hrefType)&&(e.daily&&D.push(`daily=${e.daily}`),e.show_daily&&D.push(`show_daily=${e.show_daily}`)),b.categoryParam.includes(e.hrefType)&&e.categoryIds&&D.push(`cat_ids=${decodeURIComponent(e.categoryIds)}`),"sheinxDesignerInformation"===(null==e?void 0:e.hrefType)&&e.productPosKey&&D.push(`productPosKey=${e.productPosKey}`),"activityNew"===e.hrefType){const{enableSceneMap:e=[]}=p||{};e.includes("cccx")&&D.push("proxy_enable=1")}if("trendsChannel"===e.hrefType){var P,E;if(e.adp){D.push(`contentCarrierId_adp=${e.adp}`);const t=D.findIndex((e=>e.includes("adp=")));t>-1&&D.splice(t,1)}D.push(`entry_from=page_home\`1\`all\`${null!==(P=null===(E=e.extra)||void 0===E?void 0:E.styleType)&&void 0!==P?P:"ONE_THIRD_TREND_ITEMS"}`)}if("swift"==(null==e?void 0:e.hrefType)){"debug"==m&&D.push("__test_scene__=pc");const e=window.localStorage.getItem("SmDeviceId")||window.sessionStorage.getItem("SmDeviceId")||"",t=window.localStorage.getItem("armorToken")||window.sessionStorage.getItem("armorToken")||"";D.push(`sm_device_id=${encodeURIComponent(e)}`),D.push(`armor_token=${encodeURIComponent(t)}`)}const{url_params:S}=(0,r.k$)({sceneName:null===(h=this.sceneData)||void 0===h?void 0:h.sceneName,componentName:null===(v=this.propData)||void 0===v?void 0:v.componentKey,operationComponentName:null===(f=this.propData)||void 0===f||null===(g=f.props)||void 0===g?void 0:g.name,comIndex:o+1,positionIndex:n+1,item:e,hotZoneParams:a,activityId:null===(y=this.sceneData)||void 0===y?void 0:y.activityId,activityNameEn:null===(_=this.sceneData)||void 0===_?void 0:_.activityNameEn,pageFrom:null===($=this.sceneData)||void 0===$?void 0:$.pageFrom,isBff:l,propData:this.propData});S&&D.push(S);const{name:R}=(0,r.qA)({sceneName:null===(I=this.sceneData)||void 0===I?void 0:I.sceneName,propData:this.propData,poskey:null===(w=this.sceneData)||void 0===w?void 0:w.poskey,position:`PS=${o+1}-${e.item_loc||n+1}`});R&&D.push(`ici=${encodeURIComponent(R)}`);const x=`${C}${C.indexOf("?")>-1?"&":"?"}${D.join("&")}`;if("undefined"!=typeof window&&"1"===(null===(k=window.localStorage)||void 0===k?void 0:k.getItem("ccc_link_test"))){var O,L,U,M;c.log("%c 走bff 链接","color: green; font-size: 16px; font-weight: bold;");const r=new(i())(location.href).host+`${x}`,d=this.getFullLink({item:e,cateLinks:t,compIndex:o,index:n,hotZoneParams:a,isBff:l}),p=`${new(i())(location.href).host}${d}`,m=(null==e||null===(O=e.markMap)||void 0===O||null===(L=O.spm_new)||void 0===L?void 0:L.style_nm)||(null==e||null===(U=e.markMap)||void 0===U||null===(M=U.spm_new)||void 0===M?void 0:M.component_nm)||"";(0,s.G1)(p,r,m)}return x}setLinkParams({item:e,url:t,compIndex:o=0,index:n=0,hotZoneParams:i={},isBff:a=!1}){var l,s,c,d,v,f,g,y,_,$,I,w,k;const T=[],C={dailyParam:["dailyNew","itemPicking"],activityParam:["activityOld","activityNew"],userPathParam:["real","sku","itemPicking","dailyNew","sheinPicks"],categoryParam:["dailyNew","flashSale","lightningDeal"],storeCateParam:["real","itemPicking"]};if("swift"==(null==e?void 0:e.hrefType)){"debug"==m&&T.push("__test_scene__=pc");const e=window.localStorage.getItem("SmDeviceId")||window.sessionStorage.getItem("SmDeviceId")||"",t=window.localStorage.getItem("armorToken")||window.sessionStorage.getItem("armorToken")||"";T.push(`sm_device_id=${encodeURIComponent(e)}`),T.push(`armor_token=${encodeURIComponent(t)}`)}if(e.mallCodes&&T.push(`mallCode=${e.mallCodes}`),C.activityParam.includes(e.hrefType)){const t=this.activityUrlAddQuery(e);t&&T.push(t)}if(C.categoryParam.includes(e.hrefType)&&e.categoryIds&&T.push(`cat_ids=${decodeURIComponent(e.categoryIds)}`),"category"===e.hrefType&&T.push(`channelId=${e.hrefTarget}`),C.dailyParam.includes(e.hrefType)&&(e.daily&&T.push(`daily=${e.daily}`),e.show_daily&&T.push(`show_daily=${e.show_daily}`)),"sheinxDesignerInformation"===e.hrefType&&e.productPosKey&&T.push(`productPosKey=${e.productPosKey}`),"storeHomePage"===this.sceneData.pageFrom&&C.storeCateParam.includes(e.hrefType)){const t=encodeURIComponent(JSON.stringify({select_id:this.sceneData.storeSelectId,sc_url_id:this.sceneData.storeSelectId,service_type:6}));T.push(`recommend_page_type=storeSelectListPageRec&recommend_context_params=${t}&store_code=${this.sceneData.storeCode}`),e.adp&&e.child_cat_id&&T.push("force_send_adp=1")}e.adp&&T.push(`adp=${e.adp}`),e.top_cate_id&&T.push(`top_cate_id=${e.top_cate_id}`),e.child_cat_id&&T.push(`child_cat_id=${e.child_cat_id}`);let D="",b="home"===(null===(l=this.sceneData)||void 0===l?void 0:l.pageFrom)?"home":"";"storeHomePage"===(null===(s=this.sceneData)||void 0===s?void 0:s.pageFrom)&&null!==(c=this.sceneData)&&void 0!==c&&c.storeCode&&(D+=`st=${this.sceneData.storeCode}`,b="store"),b&&T.push(`fromPageType=${b}`);const{url_params:N}=(0,r.k$)({sceneName:null===(d=this.sceneData)||void 0===d?void 0:d.sceneName,componentName:null===(v=this.propData)||void 0===v?void 0:v.componentKey,operationComponentName:null===(f=this.propData)||void 0===f||null===(g=f.props)||void 0===g?void 0:g.name,comIndex:o+1,positionIndex:n+1,item:e,hotZoneParams:i,activityId:null===(y=this.sceneData)||void 0===y?void 0:y.activityId,activityNameEn:null===(_=this.sceneData)||void 0===_?void 0:_.activityNameEn,pageFrom:null===($=this.sceneData)||void 0===$?void 0:$.pageFrom,extra:{extraSrcIdentifier:D},isBff:a,propData:this.propData});N&&T.push(N);const{name:P}=(0,r.qA)({sceneName:null===(I=this.sceneData)||void 0===I?void 0:I.sceneName,propData:this.propData,poskey:null===(w=this.sceneData)||void 0===w?void 0:w.poskey,position:`PS=${o+1}-${n+1}`});var E;(P&&T.push(`ici=${encodeURIComponent(P)}`),"thirdPartyStoreList"===(null==e?void 0:e.hrefType)&&T.push("tab=items"),u[null===(k=this.propData)||void 0===k?void 0:k.styleType])&&T.push(`styleType=${null===(E=this.propData)||void 0===E?void 0:E.styleType}`);if("activityNew"===e.hrefType){const{enableSceneMap:e=[]}=p||{};e.includes("cccx")&&T.push("proxy_enable=1")}if("trendsChannel"===e.hrefType){var S,R;if(e.adp){T.push(`contentCarrierId_adp=${e.adp}`);const t=T.findIndex((e=>e.includes("adp=")));t>-1&&T.splice(t,1)}T.push(`entry_from=page_home\`1\`all\`${null!==(S=null===(R=e.extra)||void 0===R?void 0:R.styleType)&&void 0!==S?S:"ONE_THIRD_TREND_ITEMS"}`)}for(const e in h){var x;h[e]===(null===(x=this.propData)||void 0===x?void 0:x.businessBlock)&&"home"===this.sceneData.pageFrom&&T.push(`entranceType=${e}`)}return`${t}${t.indexOf("?")>-1?"&":"?"}${T.join("&")}`}serverGetLink({item:e,url:t}){return e.adp?`${t}${t.indexOf("?")>-1?"&":"?"}adp=${e.adp}`:t}activityUrlAddQuery(e={}){const{anchor:t,immersive:o}=e.additionalConfig||{},n=[];return o&&n.push("type=immersive"),t&&n.push(`anchor=${t}`),n.join("&")}}}}]);
//# sourceMappingURL=70780-d694b7492dd6c38a.js.map